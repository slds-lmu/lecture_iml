\aufgabe{Functional ANOVA and H-statistic for categorical features}{ \label{ex:fANOVA_h-stat_categorical}

In this exercise, your task is to calculate the standard fANOVA decomposition (as introduced in the lecture) for an example with categorical features.
This means that when calculating a PD-function $f^c_{S,PD}(\xv_S)$ as well as the corresponding fANOVA component $g_S(\xv_S)$, if these are dependent on categorical features contained in $S$, that we calculate the value of the PD-function and the components at every category instead of at grid values.
Similarly, when integrating over features in the process of computing PD-functions, if some of these features are categorical, we would simply calculate the average.
% The Hoeffding (functional ANOVA) decomposition of a function 
% $f\colon[0,1]^d\to\R$ under independent inputs is the unique expansion
% \[
% f(x)
% =\sum_{A\subseteq\{1,\dots,d\}} f_A\bigl(x_A\bigr),
% \]
% where each term $f_A$ depends only on $x_A=(x_j)_{j\in A}$ and satisfies
% $\E[f_A(X_A)]=0$ for $A\neq\emptyset$.
% In practice one computes
% \[
% f_\emptyset=\E[f(X)],\quad
% f_i(x_i)=\E[f(X)\mid X_i=x_i]-f_\emptyset,\quad
% f_{ij}(x_i,x_j)=\E[f(X)\mid X_i=x_i,X_j=x_j]
% -\sum_{B\subsetneq\{i,j\}}f_B(x_B),\;\dots
% \]
% and so on by successive orthogonal projections.

In this exercise, we consider in total three features, all of which can take at most 3 different categories as values:
$$
x_j\in\{-1, 0, 1\},\quad \text{for } j=1,2,3.
$$
We further assume that the features are independent and all uniformly distributed.

let
\[
\fh(x_1,x_2,x_3)=4x_1 + 2\,x_2x_3,
\quad
x_j\in\{0,\tfrac12,1\},\quad j=1,2,3.
\]
\begin{enumerate}%[label=(\alph*)]
  \item Compute all ANOVA components
        \[
          f_\emptyset,\quad
          f_{1},f_{2},f_{3},\quad
          f_{12},f_{13},f_{23},\quad
          f_{123}.
        \]
  \item Verify pairwise orthogonality of the nonzero components
        by checking that
        \(\sum_{x\in\{0,\frac12,1\}^3} f_A(x_A)\,f_B(x_B)=0\)
        whenever $A\neq B$.
\end{enumerate}

\subsection*{Hints}
\begin{itemize}
  \item First compute the grid-average
        \(f_\emptyset=\tfrac1{27}\sum_{x_1,x_2,x_3}f(x_1,x_2,x_3).\)
  \item Then for each singleton $i$ remove lower‚Äêorder terms and average
        over the other two coordinates.
  \item Note by inspection that only $f_1$ and $f_{23}$ can be nonzero.
  \item Orthogonality follows because each $f_A$ is centered in its own
        variables and constant in the others.
\end{itemize}

}